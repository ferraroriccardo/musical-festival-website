{% set filtered_errors = [] %}
{% if p_errors is defined and p_errors %}
    {% for message in p_errors %}
        {% set msg = message|normalize_error %}
        {% set ns = namespace(matched=false) %}
        {% for keyword in error_keywords %}
            {% if keyword in msg %}
                {% set ns.matched = true %}
            {% endif %}
        {% endfor %}
        {% if ns.matched and msg not in filtered_errors %}
            {% set _ = filtered_errors.append(msg) %}
        {% endif %}
    {% endfor %}
{% endif %}
{% if filtered_errors %}
  <div class="alert alert-danger shadow position-fixed top-0 start-50 translate-middle-x mt-4" role="alert">
      {% for message in filtered_errors %}
        <p class="mb-0">{{ message }}</p>
      {% endfor %}
    </ul>
  </div>
{% endif %}
